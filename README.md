# dijon

## Development

### Makefile targets
```
make lint
make test
make docker
```

### Set up poetry
Poetry is used for dependency management. This will get your initial venv and dependencies working.

```
# Install poetry (if needed)
~/dijon $ pip install poetry

# Initialize venv
~/dijon $ poetry install
```

### Set up a local database
```
docker run -d \
    --name dijon \
    -e MARIADB_ROOT_PASSWORD=dijon \
    -e MARIADB_DATABASE=dijon \
    -e MARIADB_USER=dijon \
    -e MARIADB_PASSWORD=dijon \
    -p 3306:3306 \
    mariadb
```

To connect to the database with mysql cli
```
docker run -it --rm --network host mariadb mysql --host=0.0.0.0 --user=dijon --password=dijon dijon
```

### Running the API locally
After it's running, browse to http://localhost:8000/docs for some fancy autogenerated API documentation.

```
# Don't forget to run db migrations to create the database tables
poetry run dijon run-migrations
poetry run dijon run-api
```
